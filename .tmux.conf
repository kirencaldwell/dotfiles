# Kiren's .tmux.conf
# remap prefix from 'C-b' to 'C-a'
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# split panes using | and -
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"
unbind '"'
unbind %

# switch panes using hjkl
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# reload tmux config
bind s choose-tree -Zs
bind r source-file ~/Documents/dotfiles/.tmux.conf  ; display-message "Refreshing source file"
bind N command-prompt -p "New Session:" "new-session -A -s '%%'"

# clock
{lang=”text”, line-numbers=off} set-option -g clock-mode-colour white

# # Enable mouse mode (tmux 2.1 and above)
# set -g mouse on

# enable vi keybindings
set -g status-keys vi

# synchronize all panes in a window
bind y setw synchronize-panes 

set-window-option -g mode-keys vi

set -g status-left "#(echo $(tmux list-sessions -F "#{session_name}"))"

bind Escape copy-mode
bind-key -T copy-mode-vi 'v' send-keys -X begin-selection
bind -Tcopy-mode-vi y send -X copy-pipe 'xclip -in -selection clipboard' \; display-message "copied to system clipboard"
bind-key -Tcopy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "xclip -in -r -selection clipboard"

bind-key p paste-buffer

set -g status-interval 1
bind-key p run-shell "~/Documents/dotfiles/pomodoro.sh start" \; display-message "Starting Pomodoro timer"
bind-key e run-shell "~/Documents/dotfiles/pomodoro.sh stop" \; display-message "Stopping Pomodoro timer"
# Append the timer to the right side of the status bar.
# set -g status-right "#(~/Documents/dotfiles/pomodoro.sh status)"
set -g status-right  "#(~/Documents/dotfiles/pomodoro.sh status) - #(whoami)@#H %H:%M - %b/%d/%y"
# set -g status-right  "#(./Documents/dotfiles/tmux_monitor.sh) #(whoami)@#H %H:%M - %b/%d/%y"
# set -g status-right  ""
set -g status-right-length 800


######################
### DESIGN CHANGES ###
######################

set -g default-terminal "screen-256color"
# loud or quiet?
set -g visual-activity off
set -g visual-bell off
set -g visual-silence off
setw -g monitor-activity off
set -g bell-action none

set -g window-active-style 'fg=terminal,bg=terminal'
set -g window-style 'fg=terminal,bg=colour16'

set focus-events on

######################
### PLUGINS  ###
######################
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'jaclu/tmux-menus'
set -g @plugin 'tmux-plugins/tmux-sidebar'
set -g @plugin 'jakethekoenig/tmux-pom'

run '~/.tmux/plugins/tpm/tpm'
